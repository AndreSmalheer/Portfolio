<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Andr√© Smalheer - Portfolio</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="images/logo.png" />

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- mobile -->
    <div id="mobile_container"></div>

    <!-- desktop -->
    <div id="desktop_container"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init({
        duration: 1000, // animation duration in ms
        once: true, // whether animation should happen only once
      });
    </script>
  </body>
  <script type="module">
    import {
      includeHTML,
      loadCSSFiles,
      loadHTMLFiles,
    } from "./html-css-loader.js";

    const cssFiles = [
      "https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&display=swap",
      "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css",
      "https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&display=swap",
    ];

    const files = [
      "./desktop/header.html",
      "./general/landing_page/main_container.html",
      "./general/landing_page/about_me.html",
      "./general/landing_page/projects.html",
      "./general/landing_page/skills.html",
      "./general/landing_page/contact.html",
      "./general/landing_page/footer.html",
    ];

    const mobileFiles = ["./mobile/menu.html", "./mobile/header.html"];

    loadCSSFiles(cssFiles);

    loadHTMLFiles("desktop_container", files);

    loadHTMLFiles("mobile_container", mobileFiles);
  </script>

  <script>
    async function initInteractions() {
      const waitForHTML = () =>
        new Promise((resolve) => {
          const check = () => {
            if (
              document.querySelector(".hamburger") &&
              document.getElementById("mobile-menu")
            ) {
              resolve();
            } else {
              requestAnimationFrame(check);
            }
          };
          check();
        });

      await waitForHTML();

      const hamburger = document.querySelector(".hamburger");
      const mobileMenu = document.getElementById("mobile-menu");
      const mobileMenuLinks = mobileMenu.querySelectorAll("a");
      const body = document.body;

      hamburger.addEventListener("click", () => {
        hamburger.classList.toggle("active");
        mobileMenu.classList.toggle("show");
      });

      mobileMenuLinks.forEach((link) => {
        link.addEventListener("click", () => {
          hamburger.classList.remove("active");
          mobileMenu.classList.remove("show");
        });
      });

      body.addEventListener("click", (e) => {
        if (
          !mobileMenu.contains(e.target) &&
          !hamburger.contains(e.target) &&
          mobileMenu.classList.contains("show")
        ) {
          hamburger.classList.remove("active");
          mobileMenu.classList.remove("show");
        }
      });
    }

    // Run interaction script
    initInteractions();
  </script>
</html>
